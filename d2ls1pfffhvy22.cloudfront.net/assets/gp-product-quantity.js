!function(){"use strict";function t(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class e extends GP.Component{parseInt(t,e=10){let i=parseInt(t,e);return isNaN(i)?0:i}constructor(){var e,i,n;super(),t(this,"input",void 0),t(this,"minus",void 0),t(this,"plus",void 0),t(this,"createEventChange",t=>{var e;let i=this.getContext();if(null==i?void 0:i.isSyncProduct){let n=new CustomEvent("gp:product-change-quantity",{bubbles:!0,cancelable:!0,detail:{quantity:t,productId:null!==(e=null==i?void 0:i.productId)&&void 0!==e?e:""},composed:!0});window.dispatchEvent(n)}}),t(this,"checkToggleDisableQuantityAction",t=>{var e,i,n,s,u,l;(null==t?void 0:t.available)?(this.dataset.disabled="false",null===(e=this.plus)||void 0===e||e.removeAttribute("disabled"),null===(i=this.minus)||void 0===i||i.removeAttribute("disabled"),null===(n=this.input)||void 0===n||n.removeAttribute("disabled")):(this.dataset.disabled="true",null===(s=this.plus)||void 0===s||s.setAttribute("disabled","disabled"),null===(u=this.minus)||void 0===u||u.setAttribute("disabled","disabled"),null===(l=this.input)||void 0===l||l.setAttribute("disabled","disabled"))}),t(this,"getInputValue",()=>{if(!this.input)return 1;let t=this.parseInt(this.input.value.trim());return t<1?1:t}),this.minus=this.querySelector(".gp-minus"),this.plus=this.querySelector(".gp-plus"),this.input=this.querySelector("input"),this.setContext("quantity",this.getInputValue()),this.checkToggleDisableQuantityAction(this.getContext("variantSelected")),this.subscribeContext((t,e)=>{if(this.input){var i,n;(null==t?void 0:t.quantity)!==(null==e?void 0:e.quantity)&&(this.input.value=null!==(n=null==t?void 0:null===(i=t.quantity)||void 0===i?void 0:i.toString())&&void 0!==n?n:"1")}t.variantSelected!==e.variantSelected&&this.checkToggleDisableQuantityAction(t.variantSelected)}),null===(e=this.input)||void 0===e||e.addEventListener("change",t=>{let e=this.parseInt(t.target.value.trim());e<1&&(e=1,t.target.value="1"),this.setContext("quantity",e),this.createEventChange(e)}),null===(i=this.plus)||void 0===i||i.addEventListener("click",t=>{if(t.preventDefault(),!this.input)return;let e=this.getInputValue(),i=e+1;this.setContext("quantity",i),this.input.value=i.toString(),this.createEventChange(i)}),null===(n=this.minus)||void 0===n||n.addEventListener("click",t=>{if(t.preventDefault(),!this.input)return;let e=this.getInputValue(),i=e>=2?e-1:1;this.setContext("quantity",i),this.input.value=i.toString(),this.createEventChange(i)})}}customElements.get("gp-product-quantity")||customElements.define("gp-product-quantity",e)}();
